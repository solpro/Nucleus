CREATE TABLE ProductUser (ID INTEGER AUTO_INCREMENT NOT NULL, ADDRESS1 VARCHAR(255), ADDRESS2 VARCHAR(255), ADDRESS3 VARCHAR(255), DESCRIPTION VARCHAR(255), EMAIL VARCHAR(255), ENABLED TINYINT(1) default 0, FAX VARCHAR(255), FIRSTNAME VARCHAR(255), LASTNAME VARCHAR(255), MIDDLENAME VARCHAR(255), MOBILE VARCHAR(255), PASSWORD VARCHAR(255) NOT NULL, PHONE VARCHAR(255), READONLYFALGS INTEGER, USERNAME VARCHAR(255) NOT NULL, CITY_ID INTEGER, COMPANY_ID INTEGER NOT NULL, USERGROUP_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE Tax (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, TYPE INTEGER, VALUE DOUBLE, COMPANY_ID INTEGER NOT NULL, LEDGER_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE Item (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), LOCKED INTEGER, MRP DOUBLE, NAME VARCHAR(255) NOT NULL, OPENINGSTOCK DOUBLE, SKU VARCHAR(255), TAX INTEGER, TYPE INTEGER, COMPANY_ID INTEGER NOT NULL, ITEMCOMPANY_ID INTEGER, ITEMGROUP_ID INTEGER, STOCKLOCATION_ID INTEGER, TRADINGACCOUNT_ID INTEGER, UNIT_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE State (ID INTEGER AUTO_INCREMENT NOT NULL, NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, COUNTRY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ItemCompany (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ItemGroup (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE Ledger (ID INTEGER AUTO_INCREMENT NOT NULL, DTYPE VARCHAR(31), DESCRIPTION VARCHAR(255), LOCATION VARCHAR(255), LOCKED INTEGER, NAME VARCHAR(255) NOT NULL, OPENINGBALANCE DOUBLE, PRINTNAME VARCHAR(255), COMPANY_ID INTEGER NOT NULL, LEDGERGROUP_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE AddressType (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE StockLocation (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, TYPE_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE Country (ID INTEGER AUTO_INCREMENT NOT NULL, NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE DISCOUNT (ID INTEGER AUTO_INCREMENT NOT NULL, DTYPE VARCHAR(31), TYPE INTEGER, VALUE DOUBLE, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE UserGroup (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ItemBatch (ID INTEGER AUTO_INCREMENT NOT NULL, EXPIRYDATE DATE, NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, ITEM_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE City (ID INTEGER AUTO_INCREMENT NOT NULL, NAME VARCHAR(255) NOT NULL, PINCODE VARCHAR(255), COMPANY_ID INTEGER NOT NULL, DISTRICT_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE District (ID INTEGER AUTO_INCREMENT NOT NULL, NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, STATE_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE PartyItemDiscount (ID INTEGER NOT NULL, DATEFROM DATE, DATETO DATE, ITEM_ID INTEGER, PARTY_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE LedgerLabel (ID INTEGER AUTO_INCREMENT NOT NULL, NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ItemDiscount (ID INTEGER NOT NULL, DATEFROM DATE, DATETO DATE, ITEM_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE Company (ID INTEGER AUTO_INCREMENT NOT NULL, ADDRESS1 VARCHAR(255), ADDRESS2 VARCHAR(255), ADDRESS3 VARCHAR(255), CONTACTPERSON VARCHAR(255), DESCRIPTION VARCHAR(255), EMAIL VARCHAR(255), FAX VARCHAR(255), LICENSEDATE VARCHAR(255), LICENSENUMBER VARCHAR(255), MOBILE VARCHAR(255), NAME VARCHAR(255) NOT NULL UNIQUE, PAN VARCHAR(255), PHONE VARCHAR(255), PRINTNAME VARCHAR(255) NOT NULL, RULECONFIGURATION VARCHAR(255), SERVICETAX VARCHAR(255), TAN VARCHAR(255), TOT VARCHAR(255), VAT VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE LedgerGroup (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, TYPE INTEGER NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE Party (ID INTEGER NOT NULL, CRLIMIT DOUBLE, DRLIMIT DOUBLE, PAN VARCHAR(255), SERVICETAX VARCHAR(255), TAN VARCHAR(255), TOT VARCHAR(255), TYPE INTEGER, VAT VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE ItemTax (ID INTEGER NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, TAXTYPE INTEGER, VALUE DOUBLE, COMPANY_ID INTEGER NOT NULL, ITEM_ID INTEGER, LEDGER_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE Unit (ID INTEGER AUTO_INCREMENT NOT NULL, FACTOR DOUBLE, NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PARENTOBJ_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE PartyAddress (ID INTEGER AUTO_INCREMENT NOT NULL, ADDRESS1 VARCHAR(255), ADDRESS2 VARCHAR(255), ADDRESS3 VARCHAR(255), CONTACTPERSON VARCHAR(255), DESCRIPTION VARCHAR(255), EMAIL VARCHAR(255), FAX VARCHAR(255), MOBILE VARCHAR(255), PHONE VARCHAR(255), TAG INTEGER, CITY_ID INTEGER, COMPANY_ID INTEGER NOT NULL, TYPE_ID INTEGER, PRIMARY KEY (ID))
CREATE TABLE StockLocationType (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, COMPANY_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE LEDGER_LABEL (ledger INTEGER NOT NULL, label INTEGER NOT NULL, PRIMARY KEY (ledger, label))
CREATE TABLE PARTY_ADDRESS (party INTEGER NOT NULL, address INTEGER NOT NULL, PRIMARY KEY (party, address))
ALTER TABLE ProductUser ADD CONSTRAINT UNQ_ProductUser_0 UNIQUE (username, password, company_id)
ALTER TABLE Tax ADD CONSTRAINT UNQ_Tax_0 UNIQUE (name, company_id)
ALTER TABLE Item ADD CONSTRAINT UNQ_Item_0 UNIQUE (name, company_id, itemcompany_id)
ALTER TABLE State ADD CONSTRAINT UNQ_State_0 UNIQUE (name, country_id, company_id)
ALTER TABLE ItemCompany ADD CONSTRAINT UNQ_ItemCompany_0 UNIQUE (name, company_id)
ALTER TABLE ItemGroup ADD CONSTRAINT UNQ_ItemGroup_0 UNIQUE (name, company_id)
ALTER TABLE Ledger ADD CONSTRAINT UNQ_Ledger_0 UNIQUE (name, company_id)
ALTER TABLE AddressType ADD CONSTRAINT UNQ_AddressType_0 UNIQUE (name, company_id)
ALTER TABLE StockLocation ADD CONSTRAINT UNQ_StockLocation_0 UNIQUE (name, company_id)
ALTER TABLE Country ADD CONSTRAINT UNQ_Country_0 UNIQUE (name, company_id)
ALTER TABLE UserGroup ADD CONSTRAINT UNQ_UserGroup_0 UNIQUE (name, company_id)
ALTER TABLE ItemBatch ADD CONSTRAINT UNQ_ItemBatch_0 UNIQUE (name, company_id, item_id)
ALTER TABLE City ADD CONSTRAINT UNQ_City_0 UNIQUE (name, company_id, district_id)
ALTER TABLE District ADD CONSTRAINT UNQ_District_0 UNIQUE (name, company_id, state_id)
ALTER TABLE PartyItemDiscount ADD CONSTRAINT UNQ_PartyItemDiscount_0 UNIQUE (ledger_id, item_id, company_id)
ALTER TABLE LedgerLabel ADD CONSTRAINT UNQ_LedgerLabel_0 UNIQUE (name, company_id)
ALTER TABLE ItemDiscount ADD CONSTRAINT UNQ_ItemDiscount_0 UNIQUE (item_id, datefrom, dateto)
ALTER TABLE Company ADD CONSTRAINT UNQ_Company_0 UNIQUE (name)
ALTER TABLE LedgerGroup ADD CONSTRAINT UNQ_LedgerGroup_0 UNIQUE (name, company_id)
ALTER TABLE Party ADD CONSTRAINT UNQ_Party_0 UNIQUE (name, company_id)
ALTER TABLE ItemTax ADD CONSTRAINT UNQ_ItemTax_0 UNIQUE (name, company_id)
ALTER TABLE Unit ADD CONSTRAINT UNQ_Unit_0 UNIQUE (name, company_id)
ALTER TABLE PartyAddress ADD CONSTRAINT UNQ_PartyAddress_0 UNIQUE (address1, address2, address3, company_id)
ALTER TABLE StockLocationType ADD CONSTRAINT UNQ_StockLocationType_0 UNIQUE (name, company_id)
ALTER TABLE ProductUser ADD CONSTRAINT FK_ProductUser_CITY_ID FOREIGN KEY (CITY_ID) REFERENCES City (ID)
ALTER TABLE ProductUser ADD CONSTRAINT FK_ProductUser_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE ProductUser ADD CONSTRAINT FK_ProductUser_USERGROUP_ID FOREIGN KEY (USERGROUP_ID) REFERENCES UserGroup (ID)
ALTER TABLE Tax ADD CONSTRAINT FK_Tax_LEDGER_ID FOREIGN KEY (LEDGER_ID) REFERENCES Ledger (ID)
ALTER TABLE Tax ADD CONSTRAINT FK_Tax_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE Item ADD CONSTRAINT FK_Item_UNIT_ID FOREIGN KEY (UNIT_ID) REFERENCES Unit (ID)
ALTER TABLE Item ADD CONSTRAINT FK_Item_ITEMGROUP_ID FOREIGN KEY (ITEMGROUP_ID) REFERENCES ItemGroup (ID)
ALTER TABLE Item ADD CONSTRAINT FK_Item_ITEMCOMPANY_ID FOREIGN KEY (ITEMCOMPANY_ID) REFERENCES ItemCompany (ID)
ALTER TABLE Item ADD CONSTRAINT FK_Item_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE Item ADD CONSTRAINT FK_Item_STOCKLOCATION_ID FOREIGN KEY (STOCKLOCATION_ID) REFERENCES StockLocation (ID)
ALTER TABLE Item ADD CONSTRAINT FK_Item_TRADINGACCOUNT_ID FOREIGN KEY (TRADINGACCOUNT_ID) REFERENCES Ledger (ID)
ALTER TABLE State ADD CONSTRAINT FK_State_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE State ADD CONSTRAINT FK_State_COUNTRY_ID FOREIGN KEY (COUNTRY_ID) REFERENCES Country (ID)
ALTER TABLE ItemCompany ADD CONSTRAINT FK_ItemCompany_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE ItemGroup ADD CONSTRAINT FK_ItemGroup_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE Ledger ADD CONSTRAINT FK_Ledger_LEDGERGROUP_ID FOREIGN KEY (LEDGERGROUP_ID) REFERENCES LedgerGroup (ID)
ALTER TABLE Ledger ADD CONSTRAINT FK_Ledger_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE AddressType ADD CONSTRAINT FK_AddressType_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE StockLocation ADD CONSTRAINT FK_StockLocation_TYPE_ID FOREIGN KEY (TYPE_ID) REFERENCES StockLocationType (ID)
ALTER TABLE StockLocation ADD CONSTRAINT FK_StockLocation_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE Country ADD CONSTRAINT FK_Country_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE DISCOUNT ADD CONSTRAINT FK_DISCOUNT_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE UserGroup ADD CONSTRAINT FK_UserGroup_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE ItemBatch ADD CONSTRAINT FK_ItemBatch_ITEM_ID FOREIGN KEY (ITEM_ID) REFERENCES Item (ID)
ALTER TABLE ItemBatch ADD CONSTRAINT FK_ItemBatch_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE City ADD CONSTRAINT FK_City_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE City ADD CONSTRAINT FK_City_DISTRICT_ID FOREIGN KEY (DISTRICT_ID) REFERENCES District (ID)
ALTER TABLE District ADD CONSTRAINT FK_District_STATE_ID FOREIGN KEY (STATE_ID) REFERENCES State (ID)
ALTER TABLE District ADD CONSTRAINT FK_District_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE PartyItemDiscount ADD CONSTRAINT FK_PartyItemDiscount_ITEM_ID FOREIGN KEY (ITEM_ID) REFERENCES Item (ID)
ALTER TABLE PartyItemDiscount ADD CONSTRAINT FK_PartyItemDiscount_ID FOREIGN KEY (ID) REFERENCES DISCOUNT (ID)
ALTER TABLE PartyItemDiscount ADD CONSTRAINT FK_PartyItemDiscount_PARTY_ID FOREIGN KEY (PARTY_ID) REFERENCES Ledger (ID)
ALTER TABLE LedgerLabel ADD CONSTRAINT FK_LedgerLabel_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE ItemDiscount ADD CONSTRAINT FK_ItemDiscount_ID FOREIGN KEY (ID) REFERENCES DISCOUNT (ID)
ALTER TABLE ItemDiscount ADD CONSTRAINT FK_ItemDiscount_ITEM_ID FOREIGN KEY (ITEM_ID) REFERENCES Item (ID)
ALTER TABLE LedgerGroup ADD CONSTRAINT FK_LedgerGroup_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE Party ADD CONSTRAINT FK_Party_ID FOREIGN KEY (ID) REFERENCES Ledger (ID)
ALTER TABLE ItemTax ADD CONSTRAINT FK_ItemTax_LEDGER_ID FOREIGN KEY (LEDGER_ID) REFERENCES Ledger (ID)
ALTER TABLE ItemTax ADD CONSTRAINT FK_ItemTax_ITEM_ID FOREIGN KEY (ITEM_ID) REFERENCES Item (ID)
ALTER TABLE ItemTax ADD CONSTRAINT FK_ItemTax_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE Unit ADD CONSTRAINT FK_Unit_PARENTOBJ_ID FOREIGN KEY (PARENTOBJ_ID) REFERENCES Unit (ID)
ALTER TABLE Unit ADD CONSTRAINT FK_Unit_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE PartyAddress ADD CONSTRAINT FK_PartyAddress_CITY_ID FOREIGN KEY (CITY_ID) REFERENCES City (ID)
ALTER TABLE PartyAddress ADD CONSTRAINT FK_PartyAddress_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE PartyAddress ADD CONSTRAINT FK_PartyAddress_TYPE_ID FOREIGN KEY (TYPE_ID) REFERENCES AddressType (ID)
ALTER TABLE StockLocationType ADD CONSTRAINT FK_StockLocationType_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES Company (ID)
ALTER TABLE LEDGER_LABEL ADD CONSTRAINT FK_LEDGER_LABEL_label FOREIGN KEY (label) REFERENCES LedgerLabel (ID)
ALTER TABLE LEDGER_LABEL ADD CONSTRAINT FK_LEDGER_LABEL_ledger FOREIGN KEY (ledger) REFERENCES Ledger (ID)
ALTER TABLE PARTY_ADDRESS ADD CONSTRAINT FK_PARTY_ADDRESS_party FOREIGN KEY (party) REFERENCES Ledger (ID)
ALTER TABLE PARTY_ADDRESS ADD CONSTRAINT FK_PARTY_ADDRESS_address FOREIGN KEY (address) REFERENCES PartyAddress (ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
